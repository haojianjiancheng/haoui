(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[,,,,,,,,,,,,,function(t,e,i){},function(t,e,i){},function(t,e,i){},,function(t,e,i){"use strict";var s=i(13);i.n(s).a},function(t,e,i){},function(t,e,i){"use strict";var s=i(14);i.n(s).a},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";var s=i(15);i.n(s).a},function(t,e,i){"use strict";i.r(e);var s={name:"haoForm",data:()=>({items:[]}),props:{model:{type:Object,required:!0},autoValidate:{type:Boolean,default:!0}},provide(){return{form:this}},methods:{addItem(t){this.items.push(t)},removeItem(t){let e=this.items.indexOf(this);-1!==e&&this.items.splice(e,1)},getVal(t){return this.model[t]},validate(){let t=!0,e=[];for(let i=0;i<this.items.length;i++){let s=this.items[i].validate();"function"!=typeof s.then?s||(t=!1):e.push(s)}return e.length>0?Promise.all([t?Promise.resolve(t):Promise.reject(t),...e]).then(()=>!0,()=>!1):Promise.resolve(t)},clean(){this.items.forEach(t=>{t.error=""})}}},o=(i(17),i(1)),r=Object(o.a)(s,function(){var t=this.$createElement;return(this._self._c||t)("form",{staticClass:"form"},[this._t("default")],2)},[],!1,null,"bb10de12",null).exports;r.install=function(t){t.component(r.name,r)};var a=r,n={name:"formItem",inject:{form:{default:""}},provide(){return{formItem:this}},props:{prop:{type:String,required:!0},icon:String,label:String,labelPosition:{type:String,default:"top",validate:function(t){return["top","left","right"].includes(t)}},rules:{type:Array},helpText:String,errorText:String},data(){return{error:this.errorText,isFocuse:!1}},mounted(){this.form.addItem(this)},beforeDestroy(){this.form.removeItem(this)},methods:{validate(){if(!this.rules||0==this.rules.length)return!0;let t=[],e=[],i=this.rules.some(i=>{let s=i.validate(this.form.getVal(this.prop));return"function"==typeof s.then?(t.push(s),e.push(i.message),!1):(s||this.updateError(i.message),!s)},this);return 0===t.length?!i:t.length>0?Promise.all(t).then(t=>{for(let i=0;i<t.length;i++)if(!t[i])return this.updateError(e[i]),Promise.reject(!1);return this.updateError(""),!0}):(this.updateError(""),!0)},updateError(t="错误信息"){this.error=t},onFocuse(){this.isFocuse=!0},onBlur(){this.isFocuse=!1,this.form.autoValidate&&this.validate()},createLabel(t){if(this.label)return t("div",{staticClass:"form-item-label",class:`form-item-label-${this.labelPosition}`},[this.label])},createIcon(t){if(this.icon)return t("i",{},[this.icon])},createHelp(t){return t("div",{staticClass:"form-item-help",class:{"form-item-help-position":"top"!==this.labelPosition}},[this.error||this.helpText])}},render(t){return t("div",{staticClass:"form-item",class:{"form-item-error":!!this.error,"form-item-top":"top"===this.labelPosition}},[this.createLabel(t),this.createIcon(t),this.$scopedSlots.default(),(this.helpText||this.error)&&this.createHelp(t)])}};i(18);n.install=function(t){t.component(n.name,n)};var l=n,h={name:"haoInput",inject:{formItem:{default:""}},props:{type:String,prop:String},data:()=>({isFocuse:!1}),methods:{focus(){this.isFocuse=!0},blur(){this.isFocuse=!1},input(t){this.$emit("input",t.target.value)}},watch:{isFocuse(t){this.formItem&&(t?this.formItem.onFocuse():this.formItem.onBlur())}}},u=(i(19),Object(o.a)(h,function(){var t=this.$createElement;return(this._self._c||t)("input",this._b({class:["hao-input",{"hao-input-focuse":this.isFocuse,"hao-input-error":!!this.formItem.error}],attrs:{type:this.type},on:{focus:this.focus,blur:this.blur,input:this.input}},"input",this.$attrs,!1))},[],!1,null,"14b3ee32",null).exports),c=(i(20),{name:"icon",functional:!0,props:{value:String},render(t,{props:e}){if(e.value)return t("i",{domProps:{innerHTML:e.value},staticClass:"iconfont"})}});i(21);c.install=function(t){t.component(c.name,c)};var m=c,d={name:"haoButton",props:{large:{type:Boolean,default:!1},small:{type:Boolean,default:!1},round:{type:Boolean,default:!1},fab:{type:Boolean,default:!1},flat:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},fullWidth:{type:Boolean,default:!1},icon:{type:String},right:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}},methods:{createIcon(t){return this.icon?this.right?[this.$scopedSlots.default(),t(m,{props:{value:this.icon}})]:[t(m,{props:{value:this.icon}}),this.$scopedSlots.default()]:[this.$scopedSlots.default()]},createLoading(t){let e=t("div",{staticClass:"loading-box"},[t("div",{staticClass:"button-loading"})]),i=t("span",{staticClass:"loading-text"},"加载中");return this.right?[i,e]:[e,i]},click(t){this.disabled||this.loading||this.$emit("click",t)}},render(t){return t("button",{staticClass:"hao-button",class:{"hao-button-large":this.large,"hao-button-small":this.small,"hao-button-round":this.round,"hao-button-fab":this.fab,"hao-button-flat":this.flat,"hao-button-disabled":this.disabled||this.loading,"hao-button-full-width":this.fullWidth},attrs:{disabled:this.disabled,...this.attrs},on:{click:this.click}},this.loading?this.createLoading(t):this.createIcon(t))},install:function(t){t.component(d.name,d)}},f={components:{haoForm:a,formItem:l,haoInput:u,haoButton:d},data:()=>({regObject:{name:""},rule:[{validate:(t,e)=>t.length>10,message:"长度不够"}]}),methods:{validated(){this.$refs.form.validate().then(t=>{t&&this.$router.push("/test")})},clean(){console.log(this.$refs.form),this.$refs.form.clean(),this.regObject={name:""}}}},p=(i(22),Object(o.a)(f,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home"},[i("div",{staticClass:"home-main"},[i("hao-form",{ref:"form",attrs:{model:t.regObject}},[i("form-item",{attrs:{prop:"name",rules:t.rule,label:"name",labelPosition:"left"}},[i("hao-input",{model:{value:t.regObject.name,callback:function(e){t.$set(t.regObject,"name",e)},expression:"regObject.name"}})],1)],1),t._v(" "),i("hao-button",{on:{click:t.validated}},[t._v("验证")]),t._v(" "),i("hao-button",{on:{click:t.clean}},[t._v("清空")])],1)])},[],!1,null,"726e9698",null));e.default=p.exports}]]);